介绍Linux磁盘分区和挂载(mount)知识

补充: 主分区，扩展分区和逻辑分区:
a. 主分区是一个比较单纯的分区，通常位于硬盘的最前面一块区域中,在主分区中，不允许再建立其它逻辑磁盘
b. 由于"硬盘"仅仅为分区表保留了64个字节的存储空间，而每个分区的参数占据16个字节，故主引导扇区中总计可
   以存储4个分区的数据。操作系统只允许存储4个分区的数据.
c. 所谓扩展分区，严格地讲它不是一个实际意义的分区，它仅仅是一个指向下一个分区的指针，这种指针结构将形成
   一个单向链表。这样在主引导扇区中除了主分区外，仅需要存储一个被称为扩展分区的分区数据，通过这个扩展分
   区的数据可以找到下一个分区（实际上也就是下一个逻辑磁盘）的起始位置，以此起始位置类推可以找到所有的分区。
   无论系统中建立多少个逻辑磁盘，在主引导扇区中通过一个扩展分区的参数就可以逐个找到每一个逻辑磁盘
d. 可以这样理解
   硬盘容量 = 主分区 + 扩展分区
   扩展分区 = 各个逻辑分区之和
e. 一个硬盘最多可以分4个主分区；因此硬盘可以被分为1－3个主分区加一个扩展分区，或者仅有1－4个主分区。对于
   扩展分区，可以继续对他进行划分，分成若干个逻辑分区，也就是说扩展分区只不过是逻辑分区的“容器”。主分区的
   名称分别是hda1、hda2、hda3和hda4 ，其中扩展分区也占用一个主分区的名称。逻辑分区的名称一定是从hda5开始，
   每增加一个分区，分区名称的数字就加1，如hda6代表第二个逻辑分区等等.

1. Linux设备名称:
Linux系统中，设备名称通常保存在/dev目录下. 规则是:
<1> hd表示: Hard Disk(硬盘), 代表IDE硬盘
<2> sd表示: SATA/SCSI Disk(硬盘), 代表SATA/SCSI硬盘
<3> a表示第一个设备，b表示第二个，依次类推.
    一台PC机上能连接多块硬盘, hda表示第一块IDE硬盘. 
    hdb, hdc, sda, sdb等等.
<4> 1表示第一个硬盘分区，2表示第二个分区.
    hda1表示hda的第一个硬盘分区, hda2表示hda的第二个硬盘分区.

2. 查看/proc/filesystems获得系统支持的文件系统类型.
   cat/proc/filesystems 

3. Linux挂在硬盘的步骤
<1> 要挂载的对象文件系统
<2> 要挂载的对象设备名称 /dev/xxx
<3> 要将设备挂载到哪个目录(linux系统有一个/mnt目录，专门用作挂载点mount point)

mount [-参数] [设备名称] [挂载点] 其中常用的参数有
-t 指定设备的文件系统类型
-a 加载文件/etc/fstab中设置的所有设备

例如:
a. 挂载移动硬盘(vfat - FAT32文件系统)
mount -t vfat /dev/sda /mnt/myhd

4. /etc/fstab
文件/etc/fstab存放的是系统中的文件系统信息

fstab文件格式
下面是/etc/fatab文件的一个示例行:
fs_spec fs_file fs_type fs_options fs_dump fs_pass 
<1> fs_spec - 该字段定义希望加载的文件系统所在的设备或远程文件系统
              IDE设备一般描述为/dev/hdaXN，X是IDE设备通道(a, b, or c)，
              N代表分区号；SCSI设备一描述为/dev/sdaXN
<2> fs_file - 该字段描述希望的文件系统加载的目录点，对于swap设备，该字段为none；
              对于加载目录名包含空格的情况，用40来表示空格
<3> fs_type - 定义了该设备上的文件系统，一般常见的文件类型为ext3或者vfat等.
<4> fs_options - 挂载参数
<5> fs_dump - 该选项被dump命令使用来检查一个文件系统应该以多快频率进行转储，若
              不需要转储就设置该字段为0 
<6> fs_pass - 该字段被fsck命令用来决定在启动时需要被扫描的文件系统的顺序，根文件系
              统/对应该字段的值应该为1，其他文件系统应该为2。若该文件系统无需在启动
              时扫描则设置该字段为0 

5. Linux一个常用的分区方案:
<1> /boot分区：/boot分区用于引导系统，它 包含了操作系统的内核和在启动系统过程中所要用到的文件，
    该分区的大小一般为100MB。
<2> swap分区：swap分区的作用是充当虚拟内存，其大小通常是物理内存的两倍左右（当物理内存大于512MB时，
    swap分区为512MB即可）。

<3> /（根）分区：Linux将大部分的系统文件和用户文件都保存在根分区上，所以该分区一定要足够大，一般要求
    大于5GB。
<4> 如果系统用户数比较多，就可以建立一个/home 分区，用于保存用户主目录中的文件。
<5> 如果设置了详细的系统日志，就应该建立一个/var分区，这是因为系统的所有日志都写到了/var/log目录下，
    否则当日志占用的空间变得非常大时，会影响到/分区。


6. 一个网上摘抄的例子(没有测试):
#mount -t nfs -o rw,tcp,intr 192.168.1.3:/usr/local/nfs /usr/nfs
添加nfs成功
在centos5中的/etc/fstab添加如下语句出现问题：
192.168.1.3:/usr/local/nfs /usr/nfs nfs rw,tcp,intr 0 0
#mount -a
[mntent]: line 13 in /etc/fstab is bad
13行就是刚添加上去的这行。
网上搜索了一下，发现RH9配置指南中用/etc/fstab加载nfs的语句在最后是没有 0 0 这两项的，
去掉这两项，再 mount -a 就可以了.
